

	СЛУЧАЙ 1 - ОДИН СЕГМЕНТ СЕТИ:
	
		1. начинаем формировать пакет, в адрес отправителя включаем IP-адрес и MAC-адрес
		  компьютера отправителя.
		2. в адрес получателя включаем IP-адрес получателя, но MAC-адреса мы, как правило,
		  не знаем.
			• для того, чтобы узнать MAC-адрес по IP-адресу используется протокол ARP
			• компьютер отправитель передает ARP-запрос на широковещательный MAC-адрес
			• компьютер получатель отвечает и говорит, что у него вот такой MAC-адрес
			• компьютер отправитель берет этот MAC-адрес, вставляет в поле MAC-адрес
			  получателя, и пакет готов к передаче по сети
		3. получатель передает ответ, в адреса отправителя он вставляет свои IP и MAC-адреса
		   и наши IP и MAC в адрес получателя

	СЛУЧАЙ 2 - РАЗНЫЕ СЕТИ:
		1. начинаем формировать пакет, в адрес отправителя включаем свои IP и MAC-адреса
		2. в адрес получателя включаем его IP-адрес
		3. теперь нам нужно узнать MAC-адрес получателя
			• первым делом проверяем, находится ли получатель в одной сети с нами. Для этого
			  берем адрес нашей сети и сравниваем с адресом получателя. Подходит он под эту
			  сеть или нет.
			• если получатель находится не в нашей сети, мы не можем передать ему пакет напрямую.
		   	  Мы должны передать пакет маршрутизатору. Адрес маршрутизатора компьютер узнает
		   	  с помощью таблицы маршрутизации.
			• получив IP-адрес маршрутизатора из таблицы маршрутизации на компьютере мы ищем
			  MAC-адрес маршрутизатора. Как правило, это делается через протокол ARP.
			• после того, как определили MAC-адрес маршрутизатора, записываем его в MAC-адрес
			  получателя
		4. пакет сфорсмрован, мы его передаем на маршрутизатор
		5. маршрутизатор принимает пакет и готовит его для передачи по следующей сети.
			• IP-адреса отправителя и получателя остаются без изменений
			• MAC-адреса меняются, в MAC-адрес отправителя вставляется MAC-адрес маршрутизатора
			  в этой сети, а в MAC-адресе получателя записывается MAC-адрес нашего компьютера
			  получателя. Теперь он находится в той сети, в которую мы передаем пакет, и мы
			  можем узнать его MAC-адрес с помощью протокола ARP.
		6. получатель передает ответ. В адресе отправителя указаны его IP и MAC-адреса.
		   В IP-адресе получателя стоит IP-адрес нашего компьютера получателя, а в MAC-адресе
		   получателя MAC-адрес маршрутизатора в этой сети.
		7. Получатель передает пакет на маршрутизатор
		8. Маршрутизатор опять изменяет MAC-адреса в пакете. В поле MAC-адрес отправителя
		   записывается MAC-адрсе маршрутизатора в этой сети, а в MAC-адресе получателя, MAC-адрес
		   нашего компьютера.


		ВАЖНО!
		- IP-адреса в пакете всегда остаются постоянными. Указывается IP-адрес отправителя и IP-адрес
		  получателя в каких бы сетях они не находились и сколько бы маршрутизаторов между ними не было.
		- MAC-адреса постоянно меняются. Канальный уровень работает по принципу звеньев цепи.
		  Если на канальном уровне мы не можем передать пакет непосредственно получателю, то в качестве
		  адреса получателя указывается адрес маршрутизатора. Маршрутизатор в свою очередь меняет
		  MAC-адрес отправителя и MAC-адрес получателя. Если наш пакет проходит через несколько
		  маршрутизаторов, то такая смена проходит несколько раз.
		- при передаче пакета используются дополнительные средства сетевого и канального уровней:
			• протокол ARP - чтобы по IP-адресу компьютера или маршрутизатора узнать егол MAC-адрес.
			• Маска подсети - чтобы узнать, находится ли адрес получателя в той же самой подсети, что
			  и компьютер отправителя, и определить можно ли передать данные получателю или необходимо
			  передать данные маршрутизатору для их последующей перессылки. Если нужно передавать данные
			  маршрутизатору, то используется таблица маршрутизации либо на хосте, либо на самом
			  маршрутизаторе.

